# TxProof API - Environment Variables
# Copy this file to .env and fill in your values

# ============================================================================
# DATABASE (REQUIRED)
# ============================================================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# ============================================================================
# BLOCKCHAIN RPC PROVIDERS (REQUIRED)
# ============================================================================
# Alchemy API Key (Required for Ethereum, Polygon, Arbitrum, etc.)
ALCHEMY_API_KEY=your_alchemy_api_key_here

# Additional RPC URLs (optional, will use Alchemy if not set)
ETHEREUM_RPC_URL=https://eth-mainnet.g.alchemy.com/v2/${ALCHEMY_API_KEY}
POLYGON_RPC_URL=https://polygon-mainnet.g.alchemy.com/v2/${ALCHEMY_API_KEY}
BSC_RPC_URL=https://bsc-dataseed.binance.org/

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
PORT=3001
NODE_ENV=development

# Logging level: debug | info | warn | error
LOG_LEVEL=info

# ============================================================================
# SECURITY & AUTHENTICATION (REQUIRED)
# ============================================================================
# JWT Secret for Admin Authentication (REQUIRED, min 32 characters)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your_random_jwt_secret_min_32_characters_required

# CSRF Protection (required for admin routes)
CSRF_SECRET=your_csrf_secret_here

# Admin wallet address (lowercase)
ADMIN_WALLET=0x_your_admin_wallet_address_here

# ============================================================================
# WEBHOOK SECURITY (REQUIRED FOR PRODUCTION)
# ============================================================================
# AES-256 Encryption Key for webhook secrets (MUST be 64 hex characters = 32 bytes)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# CRITICAL: Store this securely! Losing it means losing all webhook secrets.
WEBHOOK_ENCRYPTION_KEY=your_64_char_hex_encryption_key_here

# ============================================================================
# RATE LIMITING (OPTIONAL, has defaults)
# ============================================================================
# Public API rate limits (requests per window)
PUBLIC_RATE_LIMIT=100
PUBLIC_RATE_WINDOW_MS=60000

# SaaS API rate limits (per API key)
SAAS_RATE_LIMIT=1000
SAAS_RATE_WINDOW_MS=60000

# ============================================================================
# CORS ALLOWED ORIGINS (OPTIONAL)
# ============================================================================
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=https://txproof.xyz,https://www.txproof.xyz,https://api.txproof.xyz,http://localhost:3000,http://localhost:3001

# ============================================================================
# OPTIONAL: EXTERNAL SERVICES
# ============================================================================
# Etherscan API Key (for enhanced transaction data)
ETHERSCAN_API_KEY=your_etherscan_key_here

# Gas Price Oracle API
GAS_ORACLE_URL=https://api.etherscan.io/api

# ============================================================================
# STORAGE & CACHING (OPTIONAL, has defaults)
# ============================================================================
# Receipt storage retention (days)
RECEIPT_RETENTION_DAYS=90

# Cache TTL (seconds)
CACHE_TTL=3600

# ============================================================================
# MONITORING & OBSERVABILITY (OPTIONAL)
# ============================================================================
# Sentry DSN for error tracking
# SENTRY_DSN=https://your_sentry_dsn_here

# Application Insights Key
# APPINSIGHTS_KEY=your_app_insights_key_here

# ============================================================================
# PRODUCTION DEPLOYMENT (OPTIONAL)
# ============================================================================
# Deployment platform (render | vercel | railway)
DEPLOYMENT_PLATFORM=render

# CDN URL for static assets
# CDN_URL=https://cdn.txproof.xyz

# ============================================================================
# QUICK START GUIDE
# ============================================================================
# 1. Copy this file: cp .env.example .env
# 2. Generate secrets:
#    - JWT_SECRET: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#    - WEBHOOK_ENCRYPTION_KEY: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# 3. Fill in Supabase credentials
# 4. Fill in ALCHEMY_API_KEY
# 5. Set your ADMIN_WALLET address
# 6. Start dev server: npm run dev

# ============================================================================
# SECURITY NOTES
# ============================================================================
# - Never commit .env file to version control (already in .gitignore)
# - Use secrets manager (Vault, AWS Secrets Manager) in production
# - Rotate secrets regularly (minimum every 90 days)
# - WEBHOOK_ENCRYPTION_KEY is critical - backup securely
# - JWT_SECRET should be different between environments
